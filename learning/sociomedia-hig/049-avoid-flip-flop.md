# フリップフロップ問題を避ける (Avoid Flip-Flop)

- 日付: 2026-02-18
- URL: https://www.sociomedia.co.jp/9502
- daily 記録: [daily/2026-02-18.md](../../daily/2026-02-18.md)

## ユーザーの第一印象（daily より）

Rubyでもフリップフロップ演算子ってあったけど、語源というか意味合いとしては通じるところがあるのかな？

## 深掘り・補足

### フリップフロップ問題とは

**フリップフロップ（flip-flop）** は、電子回路で「2つの安定状態を切り替えるスイッチ」を指します。UI の文脈では「ひとつのボタンでオンとオフを切り替える場合、ラベルが現在の状態を表すのか、押した後の状態を表すのかわかりづらい」という問題を指します。

Ruby のフリップフロップ演算子（`..` を条件式の中で使うやつ）も、「オン/オフを切り替える」という概念が共通しています。語源としても同じ「2つの状態を行き来する」というイメージから来ており、直感的にその混乱を理解できているのは鋭い観点です。

### 問題の具体例

ミュートボタンを考えてみましょう：

| 現在の状態 | ボタンのラベル | ユーザーが感じる混乱 |
|-----------|--------------|-------------------|
| 音が出ている | 「ミュート」 | 今ミュートなの？押したらミュートになるの？ |
| 音が出ている | 「ミュート中」| 今ミュートなの？（実は音が出ているのに） |

どちらの表記でも、ユーザーは「これは今の状態？それとも次の状態？」と一瞬迷います。

### 解決策：状態表現とラベルを分離する

**悪い例（フリップフロップ問題が発生）:**

```
[ ミュート ]  ← このボタン1つだけで状態とアクションを表現しようとしている
```

**良い例（状態とアクションを分離）:**

```
🔊 音量: オン     [ ミュートにする ]
🔇 音量: オフ     [ ミュートを解除する ]
```

- **状態表示**（アイコンやテキスト）: 今がどういう状態かを明確に示す
- **ボタンラベル**（動詞）: 押したら何が起こるかを明確に示す

### 実践的なパターン

#### パターン 1: チェックボックスに置き換える

```
☑ 通知を受け取る
```

チェックボックスは「現在の状態」を視覚的に表現するため、フリップフロップ問題が起きにくい。

#### パターン 2: ラジオボタンで明示的に

```
通知: ○ オン  ● オフ
```

選択肢を並べることで、現在どちらの状態かが一目でわかる。

#### パターン 3: 状態に応じてラベルを切り替える（動詞で）

現在の状態に応じてボタンラベルを「次にどうなるか」を表す動詞に固定する：

- 音が出ているとき → `[ ミュートにする ]`
- ミュート中のとき → `[ ミュートを解除する ]`

### 関連する原則との関係

- **[037. すべての操作可能な要素は意味を持つ](037-every-control-has-meaning.md)**: ボタンのラベルは、その操作が何をするかを一義的に伝えなければならない
- **[025. Object Reflects Its State](025-object-reflects-its-state.md)**: オブジェクト（ここではボタン）は現在の状態を反映すべきという原則と密接に関係
- **[047. デフォルトボタンには具体的な動詞を用いる](047-specific-verb-for-default-button-title.md)**: 動詞を使うことでアクションを明確にする
